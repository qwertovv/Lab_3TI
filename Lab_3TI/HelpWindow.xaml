<Window x:Class="LoopInvariantChecker.HelpWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Справка - Проверка корректности циклов"
        Height="600" 
        Width="800"
        WindowStartupLocation="CenterOwner"
        ResizeMode="CanResize">

    <Window.Resources>
        <Style x:Key="HeaderStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Foreground" Value="#0078D4"/>
            <Setter Property="Margin" Value="0,15,0,5"/>
        </Style>

        <Style x:Key="StepStyle" TargetType="TextBlock">
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Foreground" Value="#107C10"/>
            <Setter Property="Margin" Value="0,10,0,5"/>
        </Style>

        <Style x:Key="NoteStyle" TargetType="TextBlock">
            <Setter Property="FontStyle" Value="Italic"/>
            <Setter Property="Foreground" Value="#666"/>
            <Setter Property="Margin" Value="0,5,0,5"/>
        </Style>
    </Window.Resources>

    <Grid Margin="15">
        <ScrollViewer VerticalScrollBarVisibility="Auto">
            <StackPanel>
                <TextBlock Text="Инструкция по использованию приложения" 
                          FontSize="18" 
                          FontWeight="Bold"
                          Margin="0,0,0,15"
                          Foreground="#0078D4"/>

                <!-- Общее описание -->
                <TextBlock Style="{StaticResource HeaderStyle}" 
                          Text="Общее описание"/>
                <TextBlock Text="Это приложение предназначено для проверки корректности циклов с использованием инвариантов и вариант-функций. Вы можете выбрать один из трех режимов работы и наблюдать за выполнением цикла пошагово."
                          TextWrapping="Wrap"/>

                <!-- Шаги работы -->
                <TextBlock Style="{StaticResource HeaderStyle}" 
                          Text="Как пользоваться приложением"/>

                <TextBlock Style="{StaticResource StepStyle}" 
                          Text="1. Настройка данных"/>
                <TextBlock Text="• Задайте размер массива, диапазон значений и порог T&#x0a;• Нажмите 'Сгенерировать массив' для создания случайного массива&#x0a;• Выберите режим работы из выпадающего списка"
                          TextWrapping="Wrap"/>

                <TextBlock Style="{StaticResource StepStyle}" 
                          Text="2. Инициализация цикла"/>
                <TextBlock Text="• Нажмите 'Инициализировать цикл' для подготовки к выполнению&#x0a;• Приложение автоматически установит начальные значения переменных"
                          TextWrapping="Wrap"/>

                <TextBlock Style="{StaticResource StepStyle}" 
                          Text="3. Выполнение цикла"/>
                <TextBlock Text="• Используйте кнопку 'Шаг' для пошагового выполнения&#x0a;• Используйте 'Пуск' для автоматического выполнения до завершения&#x0a;• Используйте 'Стоп' для прерывания автоматического выполнения"
                          TextWrapping="Wrap"/>

                <!-- Режимы работы -->
                <TextBlock Style="{StaticResource HeaderStyle}" 
                          Text="Режимы работы"/>

                <TextBlock Style="{StaticResource StepStyle}" 
                          Text="• Prefix Sum (Сумма префикса)"/>
                <TextBlock Text="Вычисляет сумму элементов массива от начала до текущей позиции j.&#x0a;Инвариант: res = сумма от i=0 до j-1 a[i] и 0 меньше или равно j меньше или равно n&#x0a;Вариант-функция: t = n - j"
                          TextWrapping="Wrap"/>

                <TextBlock Style="{StaticResource StepStyle}" 
                          Text="• Count больше T (Подсчет элементов больше T)"/>
                <TextBlock Text="Подсчитывает количество элементов массива, превышающих порог T.&#x0a;Инвариант: res = количество i меньше j таких, что a[i] больше T и 0 меньше или равно j меньше или равно n&#x0a;Вариант-функция: t = n - j"
                          TextWrapping="Wrap"/>

                <TextBlock Style="{StaticResource StepStyle}" 
                          Text="• Prefix Max (Максимум префикса)"/>
                <TextBlock Text="Находит максимальный элемент в префиксе массива.&#x0a;Инвариант: res = максимум a[0..j-1] и 0 меньше или равно j меньше или равно n&#x0a;Вариант-функция: t = n - j"
                          TextWrapping="Wrap"/>

                <!-- Мониторинг -->
                <TextBlock Style="{StaticResource HeaderStyle}" 
                          Text="Мониторинг выполнения"/>

                <TextBlock Text="• Индикаторы инварианта:&#x0a;  - Зеленый кружок: инвариант выполняется&#x0a;  - Красный кружок: инвариант нарушен&#x0a;• Прогресс-бар: показывает убывание вариант-функции&#x0a;• Логи: отображают подробную информацию о каждом шаге&#x0a;• Блок инварианта: показывает текущий инвариант в словесной и формульной форме&#x0a;• Блок WP: показывает формулу проверки сохранения инварианта"
                          TextWrapping="Wrap"/>

                <!-- Формальные требования -->
                <TextBlock Style="{StaticResource HeaderStyle}" 
                          Text="Формальные требования"/>

                <TextBlock Text="Приложение проверяет:&#x0a;• Pre следует Inv (после инициализации)&#x0a;• Сохранение инварианта: (Inv и B) следует wp(S, Inv)&#x0a;• Выход: (Inv и не B) следует Post&#x0a;• Завершение: вариант-функция монотонно убывает и t больше или равно 0"
                          TextWrapping="Wrap"/>

                <!-- Подсказки -->
                <TextBlock Style="{StaticResource HeaderStyle}" 
                          Text="Полезные подсказки"/>

                <TextBlock Text="• Всегда инициализируйте цикл после изменения параметров&#x0a;• Используйте пошаговое выполнение для детального анализа&#x0a;• Следите за индикаторами инварианта - они помогают обнаружить ошибки&#x0a;• Проверяйте логи для понимания происходящих изменений"
                          TextWrapping="Wrap"/>

                
                <!-- Кнопка закрытия -->
                <Button Content="Закрыть" 
                        Width="80" 
                        Height="30" 
                        HorizontalAlignment="Right" 
                        Margin="0,20,0,0"
                        Click="CloseButton_Click"/>
            </StackPanel>
        </ScrollViewer>
    </Grid>
</Window>